<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cyclohexatriene.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="万里长征人未还">
<meta property="og:type" content="website">
<meta property="og:title" content="环己三烯的冬眠舱">
<meta property="og:url" content="http://cyclohexatriene.github.io/page/3/index.html">
<meta property="og:site_name" content="环己三烯的冬眠舱">
<meta property="og:description" content="万里长征人未还">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="环己三烯">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://cyclohexatriene.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>环己三烯的冬眠舱</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">环己三烯的冬眠舱</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">天天网抑云，偶尔读点书。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives" rel="section">归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section">关于</a>

  </li>
        <li class="menu-item menu-item-comment-board">

    <a href="/comment-board" rel="section">留言板</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/09/18/%E6%AF%8F%E6%97%A5Hard-Day-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/18/%E6%AF%8F%E6%97%A5Hard-Day-6/" class="post-title-link" itemprop="url">每日Hard - Day 6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-09-18 23:07:12 / 修改时间：23:16:54" itemprop="dateCreated datePublished" datetime="2022-09-18T23:07:12+08:00">2022-09-18</time>
            </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Tags</h1>
<table style="text-align:center">
    <tr>
    	<td>日期</td>
        <td>2022年9月18日</td>
    </tr>
    <tr>
    	<td>是否独立完成</td>
        <td>是</td>
    </tr>
    <tr>
    	<td>涉及算法</td>
        <td>广度优先搜索、哈希表</td>
    </tr>
</table>
<hr>
<h1>题面</h1>
<h2 id="LeetCode-827-最大人工岛"><a class="header-anchor" href="#LeetCode-827-最大人工岛">¶</a>LeetCode 827. 最大人工岛</h2>
<p>给你一个大小为 <code>n x n</code> 二进制矩阵 <code>grid</code> 。<strong>最多</strong> 只能将一格 <code>0</code> 变成 <code>1</code> 。</p>
<p>返回执行此操作后，<code>grid</code> 中最大的岛屿面积是多少？</p>
<p><strong>岛屿</strong> 由一组上、下、左、右四个方向相连的 <code>1</code> 形成。</p>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: grid = [[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line">输出: <span class="number">3</span></span><br><span class="line">解释: 将一格<span class="number">0</span>变成<span class="number">1</span>，最终连通两个小岛得到面积为 <span class="number">3</span> 的岛屿。</span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a class="header-anchor" href="#示例-2：">¶</a>示例 2：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: grid = [[<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]]</span><br><span class="line">输出: <span class="number">4</span></span><br><span class="line">解释: 将一格<span class="number">0</span>变成<span class="number">1</span>，岛屿的面积扩大为 <span class="number">4</span>。</span><br></pre></td></tr></table></figure>
<h3 id="示例-3："><a class="header-anchor" href="#示例-3：">¶</a>示例 3：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: grid = [[<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line">输出: <span class="number">4</span></span><br><span class="line">解释: 没有<span class="number">0</span>可以让我们变成<span class="number">1</span>，面积依然为 <span class="number">4</span>。</span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<h2 id="广度优先搜索-哈希表"><a class="header-anchor" href="#广度优先搜索-哈希表">¶</a>广度优先搜索+哈希表</h2>
<p>可以用广度优先搜索把每个岛都标记成对应的下标（为了方便后续统计总面积，将下标定为由-1开始增长的负整数），每搜索完一个岛就把其对应的面积存在哈希表里。然后第开始第二次遍历，遇到0就计算其周围四格的岛的面积，并实时更新最大值。</p>
<h3 id="代码："><a class="header-anchor" href="#代码：">¶</a>代码：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">largestIsland</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = grid.<span class="built_in">size</span>();</span><br><span class="line">        unordered_map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; area;</span><br><span class="line">        <span class="keyword">int</span> idx = <span class="number">-1</span>;</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; dir&#123; <span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span> &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] != <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                queue&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123; i,j &#125;);</span><br><span class="line">                <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">                    pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; cur = q.<span class="built_in">front</span>();</span><br><span class="line">                    q.<span class="built_in">pop</span>();</span><br><span class="line">                    <span class="keyword">int</span> r = cur.first, c = cur.second;</span><br><span class="line">                    <span class="keyword">if</span> (grid[r][c] &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    grid[r][c] = idx;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> d = <span class="number">0</span>; d &lt; <span class="number">4</span>; d++) &#123;</span><br><span class="line">                        <span class="keyword">int</span> nr = r + dir[d], nc = c + dir[d + <span class="number">1</span>];</span><br><span class="line">                        <span class="keyword">if</span> (nr &lt; <span class="number">0</span> || nr &gt;= n || nc &lt; <span class="number">0</span> || nc &gt;= n || grid[nr][nc] &lt;= <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                        q.<span class="built_in">push</span>(&#123; nr,nc &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    cnt++;</span><br><span class="line">                &#125;</span><br><span class="line">                area[idx] = cnt;</span><br><span class="line">                idx--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] != <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                unordered_set&lt;<span class="keyword">int</span>&gt; visited;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> d = <span class="number">0</span>; d &lt; <span class="number">4</span>; d++) &#123;</span><br><span class="line">                    <span class="keyword">int</span> ni = i + dir[d], nj = j + dir[d + <span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span> (ni &lt; <span class="number">0</span> || ni &gt;= n || nj &lt; <span class="number">0</span> || nj &gt;= n || grid[ni][nj] &gt;= <span class="number">0</span> || visited.<span class="built_in">count</span>(grid[ni][nj])) <span class="keyword">continue</span>;</span><br><span class="line">                    visited.<span class="built_in">insert</span>(grid[ni][nj]);</span><br><span class="line">                    grid[i][j] += area[grid[ni][nj]];</span><br><span class="line">                &#125;</span><br><span class="line">                res = <span class="built_in">max</span>(res, grid[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (res == <span class="number">-1</span>) <span class="keyword">return</span> area[<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> res + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/09/17/%E6%AF%8F%E6%97%A5Hard-Day-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/17/%E6%AF%8F%E6%97%A5Hard-Day-5/" class="post-title-link" itemprop="url">每日Hard - Day 5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-09-17 12:49:05 / 修改时间：14:11:03" itemprop="dateCreated datePublished" datetime="2022-09-17T12:49:05+08:00">2022-09-17</time>
            </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Tags</h1>
<table style="text-align:center">
    <tr>
    	<td>日期</td>
        <td>2022年9月17日</td>
    </tr>
    <tr>
    	<td>是否独立完成</td>
        <td>否</td>
    </tr>
    <tr>
    	<td>涉及算法</td>
        <td>动态规划 Again & Again</td>
    </tr>
</table>
<hr>
<h1>题面</h1>
<h2 id="LeetCode-940-不同的子序列-II"><a class="header-anchor" href="#LeetCode-940-不同的子序列-II">¶</a>LeetCode 940. 不同的子序列 II</h2>
<p>给定一个字符串 <code>s</code>，计算 <code>s</code> 的 <strong>不同非空子序列</strong> 的个数。因为结果可能很大，所以返回答案需要对 <code>10^9 + 7</code> <strong>取余</strong> 。</p>
<p>字符串的 <strong>子序列</strong> 是经由原字符串删除一些（也可能不删除）字符但不改变剩余字符相对位置的一个新字符串。</p>
<ul>
<li>例如，<code>&quot;ace&quot;</code> 是 <code>&quot;abcde&quot;</code> 的一个子序列，但 <code>&quot;aec&quot;</code> 不是。</li>
</ul>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;abc&quot;</span></span><br><span class="line">输出：<span class="number">7</span></span><br><span class="line">解释：<span class="number">7</span> 个不同的子序列分别是 <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;ab&quot;</span>, <span class="string">&quot;ac&quot;</span>, <span class="string">&quot;bc&quot;</span>, 以及 <span class="string">&quot;abc&quot;</span>。</span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a class="header-anchor" href="#示例-2：">¶</a>示例 2：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;aba&quot;</span></span><br><span class="line">输出：<span class="number">6</span></span><br><span class="line">解释：<span class="number">6</span> 个不同的子序列分别是 <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;ab&quot;</span>, <span class="string">&quot;ba&quot;</span>, <span class="string">&quot;aa&quot;</span> 以及 <span class="string">&quot;aba&quot;</span>。</span><br></pre></td></tr></table></figure>
<h3 id="示例-3："><a class="header-anchor" href="#示例-3：">¶</a>示例 3：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;aaa&quot;</span></span><br><span class="line">输出：<span class="number">3</span></span><br><span class="line">解释：<span class="number">3</span> 个不同的子序列分别是 <span class="string">&quot;a&quot;</span>, <span class="string">&quot;aa&quot;</span> 以及 <span class="string">&quot;aaa&quot;</span>。</span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<h2 id="动态规划"><a class="header-anchor" href="#动态规划">¶</a>动态规划</h2>
<p>如果<code>s</code>中的字符是无重复的就很简单了，针对每个字符“取”或者“不取”都有两种可能，定义<code>dp[i]</code>为<code>s</code>前<code>i</code>个字母的不同非空子序列的个数，就可以引出转移公式<code>dp[i+1]=dp[i]*2</code>。</p>
<p>但是<code>s</code>中的字符是有重复的，所以要考虑去重的事。例如<code>s=&quot;abb&quot;</code>，其中的a和两个b均能分别组成一次’ab’，所以要去掉一次，即<code>dp[i+1]=dp[i]*2-dp[last]</code></p>
<h3 id="代码："><a class="header-anchor" href="#代码：">¶</a>代码：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">distinctSubseqII</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">        unordered_map&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt; map;</span><br><span class="line">        dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            dp[i+<span class="number">1</span>]=dp[i]*<span class="number">2</span> % mod;</span><br><span class="line">            <span class="keyword">if</span>(map.<span class="built_in">count</span>(s[i])) dp[i+<span class="number">1</span>]-=dp[map[s[i]]];</span><br><span class="line">            dp[i+<span class="number">1</span>]%=mod;</span><br><span class="line">            map[s[i]]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (dp[n]<span class="number">-1</span>+mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/09/15/%E6%AF%8F%E6%97%A5Hard-Day-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/15/%E6%AF%8F%E6%97%A5Hard-Day-4/" class="post-title-link" itemprop="url">每日Hard - Day 4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-15 21:45:01" itemprop="dateCreated datePublished" datetime="2022-09-15T21:45:01+08:00">2022-09-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-08 19:34:39" itemprop="dateModified" datetime="2022-10-08T19:34:39+08:00">2022-10-08</time>
              </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Tags</h1>
<table style="text-align:center">
    <tr>
    	<td>日期</td>
        <td>2022年9月15日</td>
    </tr>
    <tr>
    	<td>是否独立完成</td>
        <td>否（差一点点！）</td>
    </tr>
    <tr>
    	<td>涉及算法</td>
        <td>动态规划Again</td>
    </tr>
</table>
<hr>
<h1>题面</h1>
<h2 id="LeetCode-1771-由子序列构造的最长回文串的长度"><a class="header-anchor" href="#LeetCode-1771-由子序列构造的最长回文串的长度">¶</a>LeetCode 1771. 由子序列构造的最长回文串的长度</h2>
<p>给你两个字符串 <code>word1</code> 和 <code>word2</code> ，请你按下述方法构造一个字符串：</p>
<ul>
<li>从 <code>word1</code> 中选出某个 <strong>非空</strong> 子序列 <code>subsequence1</code> 。</li>
<li>从 <code>word2</code> 中选出某个 <strong>非空</strong> 子序列 <code>subsequence2</code> 。</li>
<li>连接两个子序列 <code>subsequence1 + subsequence2</code> ，得到字符串。</li>
</ul>
<p>返回可按上述方法构造的最长 <strong>回文串</strong> 的 <strong>长度</strong> 。如果无法构造回文串，返回 <code>0</code> 。</p>
<p>字符串 <code>s</code> 的一个 <strong>子序列</strong> 是通过从 <code>s</code> 中删除一些（也可能不删除）字符而不更改其余字符的顺序生成的字符串。</p>
<p><strong>回文串</strong> 是正着读和反着读结果一致的字符串。</p>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：word1 = <span class="string">&quot;cacb&quot;</span>, word2 = <span class="string">&quot;cbba&quot;</span></span><br><span class="line">输出：<span class="number">5</span></span><br><span class="line">解释：从 word1 中选出 <span class="string">&quot;ab&quot;</span> ，从 word2 中选出 <span class="string">&quot;cba&quot;</span> ，得到回文串 <span class="string">&quot;abcba&quot;</span> 。</span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a class="header-anchor" href="#示例-2：">¶</a>示例 2：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：word1 = <span class="string">&quot;ab&quot;</span>, word2 = <span class="string">&quot;ab&quot;</span></span><br><span class="line">输出：<span class="number">3</span></span><br><span class="line">解释：从 word1 中选出 <span class="string">&quot;ab&quot;</span> ，从 word2 中选出 <span class="string">&quot;a&quot;</span> ，得到回文串 <span class="string">&quot;aba&quot;</span> 。</span><br></pre></td></tr></table></figure>
<h3 id="示例-3："><a class="header-anchor" href="#示例-3：">¶</a>示例 3：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：word1 = <span class="string">&quot;aa&quot;</span>, word2 = <span class="string">&quot;bb&quot;</span></span><br><span class="line">输出：<span class="number">0</span></span><br><span class="line">解释：无法按题面所述方法构造回文串，所以返回 <span class="number">0</span> 。</span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<h2 id="动态规划"><a class="header-anchor" href="#动态规划">¶</a>动态规划</h2>
<p>怎么Hard题这么多动态规划啊。而且与回文串有关的题题号也恰好是回文的，有点巧妙。</p>
<p>一开始的思路是把<code>word2</code>给reverse一下，然后通过动态规划算<code>word1</code>和<code>word2</code>的最长公共子序列，就可以得到答案了。但是遇到了下面这个测试用例WA了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string word1 = <span class="string">&quot;afaaadacb&quot;</span>;</span><br><span class="line">string word2 = <span class="string">&quot;ca&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>WA后初步认为是两个串不一样长导致的，所以添加了平衡字符串长度的代码，然后发现并不是长度的原因。还是得把两个串合在一起dp，并只在两个子串都不为空时更新答案。</p>
<h3 id="代码："><a class="header-anchor" href="#代码：">¶</a>代码：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestPalindrome</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n1 = word1.<span class="built_in">length</span>(), n2 = word2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">int</span> n = n1 + n2;</span><br><span class="line">        string word = word1 + word2;</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">dp</span>(n, vector&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">int</span> res = (word[n1 - <span class="number">1</span>] == word[n1]) ? <span class="number">2</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) dp[i][i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) dp[i][i + <span class="number">1</span>] = (word[i] == word[i + <span class="number">1</span>]) ? <span class="number">2</span> : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">2</span>; l &lt; n; l++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i + l &lt; n; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> j = i + l;</span><br><span class="line">                <span class="keyword">if</span> (word[i] == word[j]) &#123;</span><br><span class="line">                    dp[i][j] = dp[i + <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (i &lt; n1 &amp;&amp; j &gt;= n1) res = <span class="built_in">max</span>(res, dp[i][j]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> dp[i][j] = <span class="built_in">max</span>(dp[i][j - <span class="number">1</span>], dp[i + <span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h1>有的没的</h1>
<h2 id="没事听点歌（Knock-2-dashstar-）"><a class="header-anchor" href="#没事听点歌（Knock-2-dashstar-）">¶</a>没事听点歌（Knock 2 - dashstar*）</h2>
<audio controls>
    <source src="https://cyclohexatriene.github.io/music/dashstar.mp3">
</audio>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/09/14/%E6%AF%8F%E6%97%A5Hard-Day-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/14/%E6%AF%8F%E6%97%A5Hard-Day-3/" class="post-title-link" itemprop="url">每日Hard - Day 3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-09-14 12:19:17 / 修改时间：12:29:56" itemprop="dateCreated datePublished" datetime="2022-09-14T12:19:17+08:00">2022-09-14</time>
            </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Tags</h1>
<table style="text-align:center">
    <tr>
    	<td>日期</td>
        <td>2022年9月14日</td>
    </tr>
    <tr>
    	<td>是否独立完成</td>
        <td>否</td>
    </tr>
    <tr>
    	<td>涉及算法</td>
        <td>暴力枚举、几何</td>
    </tr>
</table>
<hr>
<h1>题面</h1>
<h2 id="LeetCode-149-直线上最多的点数"><a class="header-anchor" href="#LeetCode-149-直线上最多的点数">¶</a>LeetCode 149. 直线上最多的点数</h2>
<p>给你一个数组 <code>points</code> ，其中 <code>points[i] = [xi, yi]</code> 表示 <strong>X-Y</strong> 平面上的一个点。求最多有多少个点在同一条直线上。</p>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：points = [[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">3</span>]]</span><br><span class="line">输出：<span class="number">3</span></span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a class="header-anchor" href="#示例-2：">¶</a>示例 2：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：points = [[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">3</span>,<span class="number">2</span>],[<span class="number">5</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">4</span>]]</span><br><span class="line">输出：<span class="number">4</span></span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<h2 id="暴力枚举"><a class="header-anchor" href="#暴力枚举">¶</a>暴力枚举</h2>
<p>对于点a,b,c，如果其中任意两点构成的直线斜率相同，则三点共线。我们可以枚举所有的点对，用哈希表记录斜率，则可以判断有多少个点出现在同一条直线上。</p>
<p>本题难点在于计算斜率需要用到除法，而浮点数的除法是存在误差的。为了避免这个误差，一共有两种思路：</p>
<ol>
<li>利用乘法来避免除法（把两个斜率相等的表达式用对角相乘法则化为两个乘法表达式相等）。</li>
<li>用字符串来哈希。</li>
</ol>
<p>本题我选择用第二个思路解。在计算斜率时通过最大公约数把分式约分为最间，保证相同斜率的直线能全部哈希在一起。</p>
<h3 id="代码："><a class="header-anchor" href="#代码：">¶</a>代码：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">0</span> ? a : <span class="built_in">gcd</span>(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxPoints</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; points)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; points.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            unordered_map&lt;string, <span class="keyword">int</span>&gt; map;</span><br><span class="line">            <span class="keyword">int</span> mx = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; points.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                <span class="keyword">int</span> x1 = points[i][<span class="number">0</span>], y1 = points[i][<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">int</span> x2 = points[j][<span class="number">0</span>], y2 = points[j][<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">int</span> a = x1 - x2;</span><br><span class="line">                <span class="keyword">int</span> b = y1 - y2;</span><br><span class="line">                <span class="keyword">int</span> g = <span class="built_in">gcd</span>(a, b);</span><br><span class="line">                string key = <span class="built_in">to_string</span>(a / g) + <span class="string">&quot;_&quot;</span> + <span class="built_in">to_string</span>(b / g);</span><br><span class="line">                map[key]++;</span><br><span class="line">                mx = <span class="built_in">max</span>(mx, map[key]);</span><br><span class="line">            &#125;</span><br><span class="line">            res = <span class="built_in">max</span>(res, mx + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/09/13/%E6%AF%8F%E6%97%A5Hard-Day-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/13/%E6%AF%8F%E6%97%A5Hard-Day-2/" class="post-title-link" itemprop="url">每日Hard - Day 2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-13 20:44:48" itemprop="dateCreated datePublished" datetime="2022-09-13T20:44:48+08:00">2022-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-08 19:34:20" itemprop="dateModified" datetime="2022-10-08T19:34:20+08:00">2022-10-08</time>
              </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Tags</h1>
<table style="text-align:center">
    <tr>
    	<td>日期</td>
        <td>2022年9月13日</td>
    </tr>
    <tr>
    	<td>是否独立完成</td>
        <td>否</td>
    </tr>
    <tr>
    	<td>涉及算法</td>
        <td>滑动窗口（或前缀和）、动态规划</td>
    </tr>
</table>
<hr>
<h1>题面</h1>
<h2 id="LeetCode-689-三个无重叠子数组的最大和"><a class="header-anchor" href="#LeetCode-689-三个无重叠子数组的最大和">¶</a>LeetCode 689. 三个无重叠子数组的最大和</h2>
<p>给你一个整数数组 <code>nums </code>和一个整数 <code>k</code> ，找出三个长度为 <code>k</code> 、互不重叠、且全部数字和（<code>3 * k</code> 项）最大的子数组，并返回这三个子数组。</p>
<p>以下标的数组形式返回结果，数组中的每一项分别指示每个子数组的起始位置（下标从 <strong>0</strong> 开始）。如果有多个结果，返回字典序最小的一个。</p>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">1</span>], k = <span class="number">2</span></span><br><span class="line">输出：[<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line">解释：子数组 [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">5</span>] 对应的起始下标为 [<span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>]。</span><br><span class="line">也可以取 [<span class="number">2</span>, <span class="number">1</span>], 但是结果 [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>] 在字典序上更大。</span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a class="header-anchor" href="#示例-2：">¶</a>示例 2：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [1,2,1,2,1,2,1,2,1], k = 2</span><br><span class="line">输出：[0,2,4]</span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<h2 id="滑动窗口-动态规划"><a class="header-anchor" href="#滑动窗口-动态规划">¶</a>滑动窗口 + 动态规划</h2>
<p>看到多个子数组求和第一反应就是前缀和，后来看题解发现滑动窗口也可以，而且更省内存一点。</p>
<p>求完所有长度为<code>k</code>的子数组和后，可以维护一个<code>left</code>和一个<code>right</code>数组，其中<code>left</code> 存从左开始到当前位置最大的和，<code>right</code>存从右开始到当前位置最大的和。我们枚举处于中间位置的数组，再通过<code>left</code>和<code>right</code>快速检索与这个位置不冲突的左侧最大子数组和以及右侧最大子数组和，在枚举过程中不断更新结果就可以了。</p>
<h3 id="代码："><a class="header-anchor" href="#代码：">¶</a>代码：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">maxSumOfThreeSubarrays</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; sum;</span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++) cur += nums[i];</span><br><span class="line">        sum.<span class="built_in">push_back</span>(cur);</span><br><span class="line">        <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = k; i &lt; n; i++) &#123;</span><br><span class="line">            cur = cur + nums[i] - nums[i - k];</span><br><span class="line">            sum.<span class="built_in">push_back</span>(cur);</span><br><span class="line">        &#125;</span><br><span class="line">        n = sum.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">left</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">right</span><span class="params">(n, n - <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sum[i] &gt; sum[left[i - <span class="number">1</span>]]) left[i] = i;</span><br><span class="line">            <span class="keyword">else</span> left[i] = left[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sum[i] &gt;= sum[right[i + <span class="number">1</span>]]) right[i] = i;</span><br><span class="line">            <span class="keyword">else</span> right[i] = right[i + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mx = <span class="number">0</span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">res</span><span class="params">(<span class="number">3</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = k; i &lt; n - k; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mx &lt; sum[i] + sum[left[i - k]] + sum[right[i + k]]) &#123;</span><br><span class="line">                mx = sum[i] + sum[left[i - k]] + sum[right[i + k]];</span><br><span class="line">                res = &#123; left[i - k],i,right[i + k] &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h1>有的没的</h1>
<h2 id="没事听点歌（One-Republic-Counting-Stars）"><a class="header-anchor" href="#没事听点歌（One-Republic-Counting-Stars）">¶</a>没事听点歌（One Republic - Counting Stars）</h2>
<audio controls>
    <source src="https://cyclohexatriene.github.io/music/countingstars.mp3">
</audio>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/09/12/%E6%AF%8F%E6%97%A5Hard-Day-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/12/%E6%AF%8F%E6%97%A5Hard-Day-1/" class="post-title-link" itemprop="url">每日Hard - Day 1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-09-12 19:50:27 / 修改时间：20:31:21" itemprop="dateCreated datePublished" datetime="2022-09-12T19:50:27+08:00">2022-09-12</time>
            </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Tags</h1>
<table style="text-align:center">
    <tr>
    	<td>日期</td>
        <td>2022年9月12日</td>
    </tr>
    <tr>
    	<td>是否独立完成</td>
        <td>是</td>
    </tr>
    <tr>
    	<td>涉及算法</td>
        <td>动态规划</td>
    </tr>
</table>
<hr>
<h1>题面</h1>
<h2 id="LeetCode-174-地下城游戏"><a class="header-anchor" href="#LeetCode-174-地下城游戏">¶</a>LeetCode 174. 地下城游戏</h2>
<p>一些恶魔抓住了公主（<strong>P</strong>）并将她关在了地下城的右下角。地下城是由 M x N 个房间组成的二维网格。我们英勇的骑士（<strong>K</strong>）最初被安置在左上角的房间里，他必须穿过地下城并通过对抗恶魔来拯救公主。</p>
<p>骑士的初始健康点数为一个正整数。如果他的健康点数在某一时刻降至 0 或以下，他会立即死亡。</p>
<p>有些房间由恶魔守卫，因此骑士在进入这些房间时会失去健康点数（若房间里的值为负整数，则表示骑士将损失健康点数）；其他房间要么是空的（房间里的值为 0），要么包含增加骑士健康点数的魔法球（若房间里的值为正整数，则表示骑士将增加健康点数）。</p>
<p>为了尽快到达公主，骑士决定每次只向右或向下移动一步。</p>
<p><strong>编写一个函数来计算确保骑士能够拯救到公主所需的最低初始健康点数。</strong></p>
<p>例如，考虑到如下布局的地下城，如果骑士遵循最佳路径 <code>右 -&gt; 右 -&gt; 下 -&gt; 下</code>，则骑士的初始健康点数至少为 <strong>7</strong>。</p>
<table style="text-align:center">
    <tr>
    	<td>-2 (K)</td>
    	<td>-3</td>
    	<td>3</td>
    </tr>
    <tr>
    	<td>-5</td>
    	<td>-10</td>
        <td>1</td>
    </tr>
    <tr>
    	<td>10</td>
        <td>30</td>
        <td>-5 (P)</td>
    </tr>
</table>
<h3 id="说明："><a class="header-anchor" href="#说明：">¶</a>说明：</h3>
<ul>
<li>骑士的健康点数没有上限。</li>
<li>任何房间都可能对骑士的健康点数造成威胁，也可能增加骑士的健康点数，包括骑士进入的左上角房间以及公主被监禁的右下角房间。</li>
</ul>
<hr>
<h1>题解</h1>
<h2 id="动态规划"><a class="header-anchor" href="#动态规划">¶</a>动态规划</h2>
<p>随机刷居然能刷到做过的题，我还想这题还能是Hard…</p>
<p>动态规划经典题，从右下角向左上角dp，每个单元格表示在能救到公主的前提下进入该单元格前所需的最低生命值。最后<code>dp[0][0] - dungeon[0][0]</code>就是最终答案（当然，小于等于<code>0</code>当<code>1</code>处理）。</p>
<h3 id="代码："><a class="header-anchor" href="#代码：">¶</a>代码：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculateMinimumHP</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; dungeon)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = dungeon.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">int</span> n = dungeon[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">dp</span>(m, vector&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        dp[m - <span class="number">1</span>][n - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = m - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            dp[i][n - <span class="number">1</span>] = dp[i + <span class="number">1</span>][n - <span class="number">1</span>] - dungeon[i + <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (dp[i][n - <span class="number">1</span>] &lt;= <span class="number">0</span>) dp[i][n - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            dp[m - <span class="number">1</span>][i] = dp[m - <span class="number">1</span>][i + <span class="number">1</span>] - dungeon[m - <span class="number">1</span>][i + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (dp[m - <span class="number">1</span>][i] &lt;= <span class="number">0</span>) dp[m - <span class="number">1</span>][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = m - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = n - <span class="number">2</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">                <span class="keyword">int</span> a = dp[i][j + <span class="number">1</span>] - dungeon[i][j + <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">int</span> b = dp[i + <span class="number">1</span>][j] - dungeon[i + <span class="number">1</span>][j];</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(a, b);</span><br><span class="line">                <span class="keyword">if</span> (dp[i][j] &lt;= <span class="number">0</span>) dp[i][j] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = dp[<span class="number">0</span>][<span class="number">0</span>] - dungeon[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">return</span>  res &lt;= <span class="number">0</span> ? <span class="number">1</span> : res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h1>有的没的</h1>
<h2 id="关于每日Hard"><a class="header-anchor" href="#关于每日Hard">¶</a>关于每日Hard</h2>
<p>题已经刷了不少了，接下来打算加大刷题的难度。其实暑假期间就计划要每日一题Hard来着，后来没坚持几天就摸了。于是决定每次做完题来Blog打个卡，算是督促自己坚持刷题吧。也不是真的要每天做一题Hard，只能说在时间允许的前提下努力坚持吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/08/18/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E6%9C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/18/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E6%9C%BA/" class="post-title-link" itemprop="url">有限状态自动机</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-18 20:13:41" itemprop="dateCreated datePublished" datetime="2022-08-18T20:13:41+08:00">2022-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-08 19:29:51" itemprop="dateModified" datetime="2022-10-08T19:29:51+08:00">2022-10-08</time>
              </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>概述</h1>
<p>听名字就能大概猜出“有限状态自动机”是干嘛的了。</p>
<ul>
<li>
<p>有一个当前状态 <code>pre</code></p>
</li>
<li>
<p>每轮循环输入一个 <code>cur</code></p>
</li>
<li>
<p>有限状态自动机可以根据事先的定义来进行状态的转移</p>
</li>
</ul>
<p>有限状态自动机并不能降低算法的复杂度，但是可以让代码看起来非常简洁清爽，也不会写着写着就晕掉了。</p>
<hr>
<h1>例题</h1>
<h2 id="剑指-Offer-20-表示数值的字符串"><a class="header-anchor" href="#剑指-Offer-20-表示数值的字符串">¶</a>剑指 Offer 20. 表示数值的字符串</h2>
<p>请实现一个函数用来判断字符串是否表示<strong>数值</strong>（包括整数和小数）。</p>
<p><strong>数值</strong>（按顺序）可以分成以下几个部分：</p>
<ol>
<li>
<p>若干空格</p>
</li>
<li>
<p>一个 <strong>小数</strong> 或者 <strong>整数</strong></p>
</li>
<li>
<p>（可选）一个 <code>'e'</code> 或 <code>'E'</code> ，后面跟着一个 <strong>整数</strong></p>
</li>
<li>
<p>若干空格</p>
</li>
</ol>
<p><strong>小数</strong>（按顺序）可以分成以下几个部分：</p>
<ol>
<li>
<p>（可选）一个符号字符（<code>'+'</code> 或 <code>'-'</code>）</p>
</li>
<li>
<p>下述格式之一：</p>
<ol>
<li>
<p>至少一位数字，后面跟着一个点 <code>'.'</code></p>
</li>
<li>
<p>至少一位数字，后面跟着一个点 <code>'.'</code>，后面再跟着至少一位数字</p>
</li>
<li>
<p>一个点 <code>'.'</code> ，后面跟着至少一位数字</p>
</li>
</ol>
</li>
</ol>
<p><strong>整数</strong>（按顺序）可以分成以下几个部分：</p>
<ol>
<li>
<p>（可选）一个符号字符（‘+’ 或 ‘-’）</p>
</li>
<li>
<p>至少一位数字</p>
</li>
</ol>
<p>部分<strong>数值</strong>列举如下：</p>
<ul>
<li><code>[&quot;+100&quot;, &quot;5e2&quot;, &quot;-123&quot;, &quot;3.1416&quot;, &quot;-1E-16&quot;, &quot;0123&quot;]</code></li>
</ul>
<p>部分<strong>非数值</strong>列举如下：</p>
<ul>
<li><code>[&quot;12e&quot;, &quot;1a3.14&quot;, &quot;1.2.3&quot;, &quot;+-5&quot;, &quot;12e+5.4&quot;]</code></li>
</ul>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;0&quot;</span></span><br><span class="line">输出：<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a class="header-anchor" href="#示例-2：">¶</a>示例 2：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;e&quot;</span></span><br><span class="line">输出：<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="示例-3："><a class="header-anchor" href="#示例-3：">¶</a>示例 3：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;.&quot;</span></span><br><span class="line">输出：<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="示例-4："><a class="header-anchor" href="#示例-4：">¶</a>示例 4：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;    .1  &quot;</span></span><br><span class="line">输出：<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<p>先贴一段我第一次写时的代码，用的是暴力模拟，写半天自己都写晕了，到后面变量名字都开始乱七八糟了，因为不能一次性考虑到所有细节， 所以根据WA给的测试用例缝缝补补勉强通过。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    stringstream ss;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isNumber</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        ss &lt;&lt; s;</span><br><span class="line">        ss &gt;&gt; ws;</span><br><span class="line">        <span class="keyword">if</span>(ss.<span class="built_in">peek</span>()==<span class="string">&#x27;+&#x27;</span> || ss.<span class="built_in">peek</span>()==<span class="string">&#x27;-&#x27;</span>) ss.<span class="built_in">get</span>();</span><br><span class="line">        <span class="keyword">bool</span> hasnum=<span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">isdigit</span>(ss.<span class="built_in">peek</span>()))&#123;</span><br><span class="line">            ss.<span class="built_in">get</span>();</span><br><span class="line">            hasnum=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ss.<span class="built_in">peek</span>()==<span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">            ss.<span class="built_in">get</span>();</span><br><span class="line">            <span class="keyword">bool</span> hasnum2=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">isdigit</span>(ss.<span class="built_in">peek</span>()))&#123;</span><br><span class="line">                ss.<span class="built_in">get</span>();</span><br><span class="line">                hasnum2=<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!hasnum2 &amp;&amp; !hasnum) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(!hasnum) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(ss.<span class="built_in">peek</span>()==<span class="string">&#x27;e&#x27;</span> || ss.<span class="built_in">peek</span>()==<span class="string">&#x27;E&#x27;</span>)&#123;</span><br><span class="line">            ss.<span class="built_in">get</span>();</span><br><span class="line">            <span class="keyword">bool</span> hasnum1=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(ss.<span class="built_in">peek</span>()==<span class="string">&#x27;+&#x27;</span> || ss.<span class="built_in">peek</span>()==<span class="string">&#x27;-&#x27;</span>) ss.<span class="built_in">get</span>();</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">isdigit</span>(ss.<span class="built_in">peek</span>()))&#123;</span><br><span class="line">                ss.<span class="built_in">get</span>();</span><br><span class="line">                hasnum1=<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!hasnum1) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ss &gt;&gt; ws;</span><br><span class="line">        <span class="keyword">return</span> ss.<span class="built_in">peek</span>()==<span class="number">-1</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>而使用有限状态自动机就可以让代码非常清晰。我们可以定义如下的状态：</p>
<img src="https://cyclohexatriene.github.io/images/FSM.png" width=500 />
<center><font size="2">图源：LeetCode @Krahets 前辈的题解</font></center>
<p>在代码中，我们使用数组+字典来储存上图。只有退出后的状态为 <code>2/3/7/8</code> 中的一个时，我们才认为输入的字符串为合法的数值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isNumber</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        stringstream ss;</span><br><span class="line">        ss &lt;&lt; s;</span><br><span class="line">        vector&lt;unordered_map&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;&gt; states = &#123;</span><br><span class="line">            &#123; &#123;<span class="string">&#x27; &#x27;</span>, <span class="number">0</span>&#125;,&#123; <span class="string">&#x27;s&#x27;</span>, <span class="number">1</span>&#125;,&#123; <span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>&#125;, &#123;<span class="string">&#x27;.&#x27;</span>, <span class="number">4</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>&#125;,&#123; <span class="string">&#x27;.&#x27;</span>, <span class="number">4</span>&#125; &#125; ,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>&#125;,&#123; <span class="string">&#x27;.&#x27;</span>, <span class="number">3</span>&#125;, &#123;<span class="string">&#x27;e&#x27;</span>, <span class="number">5</span>&#125;, &#123;<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">3</span>&#125;, &#123;<span class="string">&#x27;e&#x27;</span>, <span class="number">5</span>&#125;, &#123;<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">3</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;s&#x27;</span>, <span class="number">6</span>&#125;, &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">7</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">7</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27;d&#x27;</span>, <span class="number">7</span>&#125;, &#123;<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>&#125; &#125;,</span><br><span class="line">            &#123; &#123;<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>&#125; &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (ss.<span class="built_in">peek</span>() != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = ss.<span class="built_in">get</span>();</span><br><span class="line">            <span class="keyword">char</span> cur;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&#x27;0&#x27;</span> &lt;= c &amp;&amp; c &lt;= <span class="string">&#x27;9&#x27;</span>) cur = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span> || c == <span class="string">&#x27;-&#x27;</span>) cur = <span class="string">&#x27;s&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;e&#x27;</span> || c == <span class="string">&#x27;E&#x27;</span>) cur = <span class="string">&#x27;e&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;.&#x27;</span> || c == <span class="string">&#x27; &#x27;</span>) cur = c;</span><br><span class="line">            <span class="keyword">else</span> cur = <span class="string">&#x27;?&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (states[pre].<span class="built_in">count</span>(cur) &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            pre = states[pre][cur];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre == <span class="number">2</span> || pre == <span class="number">3</span> || pre == <span class="number">7</span> || pre == <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h1>有的没的</h1>
<h2 id="天才操作"><a class="header-anchor" href="#天才操作">¶</a>天才操作</h2>
<p>13号回的学校。回校前精心挑选了一班快十几分钟的车次，然后当天到了宁波站了才发现终点站是杭州南，不是杭州东，少坐一站可不是快一点嘛。后来找乘务姐姐补了一站路。</p>
<img src="https://cyclohexatriene.github.io/images/ticket.png" width=400/>
<h2 id="新生要来报到了"><a class="header-anchor" href="#新生要来报到了">¶</a>新生要来报到了</h2>
<p>明天新生就陆续要来报到了，我也该读大三了。没有人永远年轻，但永远有人年轻。</p>
<img src="https://cyclohexatriene.github.io/images/freshman.jpg" width=400/>
<h2 id="没事听点歌（Neck-Deep-Serpent）"><a class="header-anchor" href="#没事听点歌（Neck-Deep-Serpent）">¶</a>没事听点歌（Neck Deep - Serpent）</h2>
<audio controls>
    <source src="https://cyclohexatriene.github.io/music/Serpent.mp3" type="audio/mpeg">
</audio>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/07/26/%E8%B7%B3%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/26/%E8%B7%B3%E8%A1%A8/" class="post-title-link" itemprop="url">跳表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-26 21:21:21" itemprop="dateCreated datePublished" datetime="2022-07-26T21:21:21+08:00">2022-07-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-08 19:36:12" itemprop="dateModified" datetime="2022-10-08T19:36:12+08:00">2022-10-08</time>
              </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>概述</h1>
<p>今天LeetCode的每日一题是设计一个跳表。跳表是一种类似链表的数据结构，可以实现时间复杂度为 <code>O(log n)</code> 的查找和插入，效率堪比红黑树。</p>
<p>常规的链表可以实现常数级时间复杂度的插入，但是查找某一个特定元素的元素却是线性的。而诸如数组和vector之类的简单线性的数据结构，虽然可以通过二分查找来实现 <code>O(log n)</code> 时间复杂度的查找，但是在某个特定位置插入一个元素需要把其后面所有元素都挪动一遍，牵一发而动全身。而AVL树、红黑树可以平衡插入和查找的效率，被广泛应用。今天刚学到的跳表也有相似的性质。</p>
<blockquote>
<p>插一个小故事。就前两天我在看《STL源码剖析》试图理解红黑树的时候还看到一段话，说普通的链表查找某一个特定元素是线性的，我就想这个作者也太菜了，你不能二分查找吗？后来仔细一想，才想起来原来链表是没法随机访问的，自然不能二分查找，是我太菜了。</p>
<p>后来还是看不懂红黑树是什么原理。但是跳表就好理解多了。在LeetCode评论区里看到一条，“想了半天要如何确定一个值应该占用几层的链表，然后你给我来个coin filp，我遭不住了，底层逻辑基于随机数，怪不得STL里没你”，笑死我了。</p>
</blockquote>
<p>扯了这么多，那么跳表到底是什么原理呢？用LeetCode上的一张图就可以看懂了。</p>
<p><img src="https://cyclohexatriene.github.io/images/skiplist.gif" alt=""></p>
<h2 id="查找"><a class="header-anchor" href="#查找">¶</a>查找</h2>
<p>查找时从上往下依次找到每层小于目标值的最大的节点，然后依次往下查找，中间可以跳过很多个节点。因为可以有可以跳过节点这个性质，跳表查找的平均时间复杂度是<code>O(log n)</code> ，这个有大佬证明了，而我不是大佬所以我不会证明。</p>
<h2 id="插入"><a class="header-anchor" href="#插入">¶</a>插入</h2>
<p>插入时也依次从上往下找插入的节点，第<code>0</code>层包含跳表内的所有元素，然后每个元素在插入时有<code>p</code>的概率可以加入到上面那层，<code>p</code> 一般被设置为 <code>1/2</code> 。没错，跳表的结构是随机出来的，就是这么草率。</p>
<hr>
<h1>例题</h1>
<h2 id="LeetCode-1206-设计跳表"><a class="header-anchor" href="#LeetCode-1206-设计跳表">¶</a>LeetCode 1206. 设计跳表</h2>
<p>就是设计一个上述跳表，要求实现查找、插入和删除三个功能。</p>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">输入</span><br><span class="line">[<span class="string">&quot;Skiplist&quot;</span>, <span class="string">&quot;add&quot;</span>, <span class="string">&quot;add&quot;</span>, <span class="string">&quot;add&quot;</span>, <span class="string">&quot;search&quot;</span>, <span class="string">&quot;add&quot;</span>, <span class="string">&quot;search&quot;</span>, <span class="string">&quot;erase&quot;</span>, <span class="string">&quot;erase&quot;</span>, <span class="string">&quot;search&quot;</span>]</span><br><span class="line">[[], [<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>], [<span class="number">0</span>], [<span class="number">4</span>], [<span class="number">1</span>], [<span class="number">0</span>], [<span class="number">1</span>], [<span class="number">1</span>]]</span><br><span class="line">输出</span><br><span class="line">[null, null, null, null, <span class="literal">false</span>, null, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>]</span><br><span class="line"></span><br><span class="line">解释</span><br><span class="line">Skiplist skiplist = <span class="keyword">new</span> <span class="built_in">Skiplist</span>();</span><br><span class="line">skiplist.<span class="built_in">add</span>(<span class="number">1</span>);</span><br><span class="line">skiplist.<span class="built_in">add</span>(<span class="number">2</span>);</span><br><span class="line">skiplist.<span class="built_in">add</span>(<span class="number">3</span>);</span><br><span class="line">skiplist.<span class="built_in">search</span>(<span class="number">0</span>);   <span class="comment">// 返回 false</span></span><br><span class="line">skiplist.<span class="built_in">add</span>(<span class="number">4</span>);</span><br><span class="line">skiplist.<span class="built_in">search</span>(<span class="number">1</span>);   <span class="comment">// 返回 true</span></span><br><span class="line">skiplist.<span class="built_in">erase</span>(<span class="number">0</span>);    <span class="comment">// 返回 false，0 不在跳表中</span></span><br><span class="line">skiplist.<span class="built_in">erase</span>(<span class="number">1</span>);    <span class="comment">// 返回 true</span></span><br><span class="line">skiplist.<span class="built_in">search</span>(<span class="number">1</span>);   <span class="comment">// 返回 false，1 已被擦除</span></span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Skiplist</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="comment">//链表的节点类，把插入和删除的操作都集成进来了</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">int</span> val;</span><br><span class="line">        vector&lt;Node* &gt; next = vector&lt;Node* &gt;(<span class="number">10</span>, <span class="literal">nullptr</span>);<span class="comment">//为了偷懒这里直接把十层链表的头尾节点都预留好了，内存击败百分五[ac01]</span></span><br><span class="line">        <span class="built_in">Node</span>(<span class="keyword">int</span> v) :<span class="built_in">val</span>(v) &#123;&#125;;<span class="comment">//构造函数</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Node* nxt, <span class="keyword">int</span> level)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//在当前节点后面插入节点nxt，level代表目前操作的层数</span></span><br><span class="line">            vector&lt;Node* &gt;&amp; cur = <span class="keyword">this</span>-&gt;next;</span><br><span class="line">            nxt-&gt;next[level] = cur[level];</span><br><span class="line">            cur[level] = nxt;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">erasenext</span><span class="params">(Node* nxt)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//在整个跳表中移除节点nxt</span></span><br><span class="line">            vector&lt;Node* &gt;&amp; cur = <span class="keyword">this</span>-&gt;next;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cur[i] == nxt) &#123;</span><br><span class="line">                    cur[i] = cur[i]-&gt;next[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//head和tail为头尾节点</span></span><br><span class="line">    Node* head;</span><br><span class="line">    Node* tail;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Skiplist</span>() &#123;</span><br><span class="line">        <span class="comment">//Skiplist类的构造函数，将head和tail进行初始化</span></span><br><span class="line">        head = <span class="keyword">new</span> <span class="built_in">Node</span>(<span class="number">-1</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="built_in">Node</span>(<span class="number">1e9</span> + <span class="number">7</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//初始状态head的十个指针均应指向tail</span></span><br><span class="line">            head-&gt;next[i] = tail;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        Node* cur = head;</span><br><span class="line">        <span class="comment">//从上往下依次找到每层比target小的最大节点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">9</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cur-&gt;next[i]-&gt;val &lt; target) cur = cur-&gt;next[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果最后一层的下一个节点的值不是target的话，那target一定不在跳表里。</span></span><br><span class="line">        <span class="keyword">return</span> cur-&gt;next[<span class="number">0</span>]-&gt;val == target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*前半部分和search过程一样</span></span><br><span class="line"><span class="comment">        只是需要多用一个stack把路上遇到的节点都存起来 */</span></span><br><span class="line">        stack&lt;Node* &gt; stk;</span><br><span class="line">        Node* cur = head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">9</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cur-&gt;next[i]-&gt;val &lt; num) cur = cur-&gt;next[i];</span><br><span class="line">            stk.<span class="built_in">push</span>(cur);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> level = <span class="number">0</span>;</span><br><span class="line">        Node* newnode = <span class="keyword">new</span> <span class="built_in">Node</span>(num);<span class="comment">//创建新节点</span></span><br><span class="line">        cur-&gt;<span class="built_in">insert</span>(newnode, level);<span class="comment">//第0层含有跳表全部元素，所以必须加入</span></span><br><span class="line">        <span class="keyword">while</span> (level &lt; <span class="number">9</span> &amp;&amp; <span class="built_in">rand</span>() % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//进行一次判定，有1/2的几率可以进入上一层</span></span><br><span class="line">            level++;</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            stk.<span class="built_in">top</span>()-&gt;<span class="built_in">insert</span>(newnode, level);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">erase</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//前半部分和add一样需要把路过的节点存起来</span></span><br><span class="line">        stack&lt;Node* &gt; stk;</span><br><span class="line">        Node* cur = head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">9</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (cur-&gt;next[i]-&gt;val &lt; num) cur = cur-&gt;next[i];</span><br><span class="line">            stk.<span class="built_in">push</span>(cur);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cur-&gt;next[<span class="number">0</span>]-&gt;val != num) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//如果跳表里没有num就直接返回false</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/*否则调用erase函数删除后面一个节点</span></span><br><span class="line"><span class="comment">            此处传入的是节点的指针，保证不会误伤别的具有相同值的节点 */</span></span><br><span class="line">            cur-&gt;<span class="built_in">erasenext</span>(cur-&gt;next[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h1>有的没的</h1>
<h2 id="暑假生活"><a class="header-anchor" href="#暑假生活">¶</a>暑假生活</h2>
<p>暑假在家真的宅烂了，今天跟两个初中同学去南虹吃了一整天。吃了臭豆腐、老长沙手工肠、颜记排骨、虾滑、两杯茶百道、KFC、炸串串，饱死了。</p>
<p><img src="https://cyclohexatriene.github.io/images/kfc.jpg" alt=""></p>
<h2 id="没事听点歌（胡歌-忘记时间）"><a class="header-anchor" href="#没事听点歌（胡歌-忘记时间）">¶</a>没事听点歌（胡歌 - 忘记时间）</h2>
<audio controls>
    <source src="https://cyclohexatriene.github.io/music/忘记时间.mp3" type="audio/mpeg">
</audio>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cyclohexatriene.github.io/2022/07/08/%E5%B9%B6%E6%9F%A5%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="环己三烯">
      <meta itemprop="description" content="万里长征人未还">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="环己三烯的冬眠舱">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/08/%E5%B9%B6%E6%9F%A5%E9%9B%86/" class="post-title-link" itemprop="url">并查集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-08 15:44:33" itemprop="dateCreated datePublished" datetime="2022-07-08T15:44:33+08:00">2022-07-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-08 19:32:29" itemprop="dateModified" datetime="2022-10-08T19:32:29+08:00">2022-10-08</time>
              </span>

          
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>概述</h1>
<p>并查集是用来处理一些不相交集合的合并和查询问题，开始时每个元素都是一个集合，然后在处理中会依据一些规则来进行集合的合并。在逻辑上，并查集是由很多树组成的森林，而在实际的代码中，我们往往使用数组来储存，数组的下标表示树的节点，下标对应的元素表示该节点的父节点。另外，我们定义根节点的父节点是它自己。并查集的操作有：</p>
<ul>
<li>
<p>查询某个节点的根节点</p>
</li>
<li>
<p>合并两个集合</p>
</li>
</ul>
<hr>
<h1>代码实现</h1>
<h2 id="初始化"><a class="header-anchor" href="#初始化">¶</a>初始化</h2>
<p>首先定义一个 <code>vector</code> 来表示并查集。在初始化时，我们将其中每个元素设为其对应下标的值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line"><span class="comment">//初始化代码</span></span><br><span class="line">vec.<span class="built_in">resize</span>(n, <span class="number">0</span>);<span class="comment">//n代表元素的数量</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) vec[i] = i;</span><br></pre></td></tr></table></figure>
<h2 id="查询"><a class="header-anchor" href="#查询">¶</a>查询</h2>
<p>查询指查询给定节点的根节点。若两个节点的根节点相同，则表示这两个节点在同一个集合里。在代码中，如果某个节点不是根节点（表现为元素与其对应的下标不相等），则递归地查找其父节点的根节点，并将其父节点直接修改为根节点以减少下次查找所需要的时间（称为“路径压缩”）。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (vec[root] != root) vec[root] = <span class="built_in">find</span>(vec[root]);</span><br><span class="line">    <span class="keyword">return</span> vec[root];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="合并"><a class="header-anchor" href="#合并">¶</a>合并</h2>
<p>合并指将给定两个节点所在的集合合并为一个集合。在代码中通过将其中一个集合的根节点的父节点设置成另一个节点的根节点，这样两个集合就有了共同的根节点，即合并为同一个集合了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">union_root</span><span class="params">(<span class="keyword">int</span> r1, <span class="keyword">int</span> r2)</span> </span>&#123;</span><br><span class="line">    vec[<span class="built_in">find</span>(r1)] = vec[<span class="built_in">find</span>(r2)];</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1>例题</h1>
<h2 id="LeetCode-765-情侣牵手"><a class="header-anchor" href="#LeetCode-765-情侣牵手">¶</a>LeetCode 765. 情侣牵手</h2>
<p><code>n</code> 对情侣坐在连续排列的 <code>2n</code> 个座位上，想要牵到对方的手。</p>
<p>人和座位由一个整数数组 <code>row</code> 表示，其中 <code>row[i]</code> 是坐在第 <code>i</code> 个座位上的人的 <strong>ID</strong>。情侣们按顺序编号，第一对是 <code>(0, 1)</code>，第二对是 <code>(2, 3)</code>，以此类推，最后一对是 <code>(2n-2, 2n-1)</code>。</p>
<p>返回 <em>最少交换座位的次数，以便每对情侣可以并肩坐在一起。</em> 每次交换可选择任意两人，让他们站起来交换座位。</p>
<h3 id="示例-1："><a class="header-anchor" href="#示例-1：">¶</a>示例 1：</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: row = [<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line">输出: <span class="number">1</span></span><br><span class="line">解释: 只需要交换row[<span class="number">1</span>]和row[<span class="number">2</span>]的位置即可。</span><br></pre></td></tr></table></figure>
<h3 id="示例-2"><a class="header-anchor" href="#示例-2">¶</a>示例 2:</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: row = [<span class="number">3</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">输出: <span class="number">0</span></span><br><span class="line">解释: 无需交换座位，所有的情侣都已经可以手牵手了。</span><br></pre></td></tr></table></figure>
<hr>
<h1>题解</h1>
<p>通过观察我们可以发现：</p>
<ul>
<li>
<p>如果有 <code>2</code> 对情侣彼此坐错了位置，则需要进行 <code>1</code> 次交换。</p>
</li>
<li>
<p>如果有 <code>3</code> 对情侣彼此坐错了位置，则需要进行 <code>2</code> 次交换。</p>
</li>
<li>
<p>如果有 <code>4</code> 对情侣彼此坐错了位置，则需要进行 <code>3</code> 次交换。</p>
</li>
<li>
<p>如果有 <code>n</code> 对情侣彼此坐错了位置，则需要进行 <code>n-1</code> 次交换。</p>
</li>
</ul>
<p>那么我们可以采用并查集的数据结构，将彼此坐错的情侣放进同一个集合，记并查集森林中有 <code>cnt</code> 棵树，共有 <code>n</code> 对情侣，那么需要交换的次数就是 <code>n-cnt</code> 。</p>
<h2 id="代码"><a class="header-anchor" href="#代码">¶</a>代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (vec[root] != root) vec[root] = <span class="built_in">find</span>(vec[root]);</span><br><span class="line">        <span class="keyword">return</span> vec[root];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">union_root</span><span class="params">(<span class="keyword">int</span> r1, <span class="keyword">int</span> r2)</span> </span>&#123;</span><br><span class="line">        vec[<span class="built_in">find</span>(r1)] = vec[<span class="built_in">find</span>(r2)];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSwapsCouples</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; row)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = row.<span class="built_in">size</span>(); <span class="keyword">int</span> m = n / <span class="number">2</span>;</span><br><span class="line">        vec.<span class="built_in">resize</span>(m, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) vec[i] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="built_in">union_root</span>(row[<span class="number">2</span> * i - <span class="number">2</span>] / <span class="number">2</span>, row[<span class="number">2</span> * i - <span class="number">1</span>] / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">find</span>(i) == i) cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m - cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在代码中，我们用某个人的 <strong>ID</strong> 除以 <code>2</code> 来表示ta和ta对象共同的 <strong>情侣ID</strong>，然后把实际上挨着坐的人都 <code>union</code> 起来。如果他们本来就是情侣，则最终他们所在集合就只会有一个元素，表示这个集合中的人不需要交换。 <code>union</code> 到最后，我们得到的并查集中每个集合的情侣都坐混了，需要互相发生交换；而不同集合中的情侣之间则不需要发生交换。</p>
<hr>
<h1>有的没的</h1>
<h2 id="速通《空洞骑士》"><a class="header-anchor" href="#速通《空洞骑士》">¶</a>速通《空洞骑士》</h2>
<p>这游戏很简单的，两个多小时就通关了(狗头)。</p>
<p><img src="https://cyclohexatriene.github.io/images/hk.png" alt=""></p>
<h2 id="没事听点歌（莫文蔚-这世界那么多人）"><a class="header-anchor" href="#没事听点歌（莫文蔚-这世界那么多人）">¶</a>没事听点歌（莫文蔚 - 这世界那么多人）</h2>
<audio controls>
    <source src="https://cyclohexatriene.github.io/music/这世界那么多人.mp3" type="audio/mpeg">
</audio>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="环己三烯"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">环己三烯</p>
  <div class="site-description" itemprop="description">万里长征人未还</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">环己三烯</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'UsSNtA9GJ5h8tGViWaV97qbO-9Nh9j0Va',
      appKey     : 'J83xwqE3YCKgWOy0dIBrad1s',
      placeholder: "莫西莫西？",
      avatar     : 'hide',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : 'https://ussnta9g.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});
</script>

</body>
</html>
